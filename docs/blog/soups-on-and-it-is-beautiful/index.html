<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Soup&#39;s On! And it IS Beautiful!</title>
    
    <link rel="stylesheet" href="/static/simple.css-2.2.1/simple.min.css">
  </head>
  <body>
    <header>
      <nav>
        <a href="/">Home</a>
        <a href="/blog/">Blog</a>
        
        
        <a href="/about/">About</a>
        <a href="/services/">Services</a>
        <a href="/contact/">Contact</a>
      </nav>
      <h1>Soup&#39;s On! And it IS Beautiful!</h1>
      
  <div>Published on 2008-11-17T12:41:00+00:00</div>
  
    <div>
    
      <mark>Programming</mark> &nbsp;
    
      <mark>Python</mark> &nbsp;
    
      <mark>web</mark> &nbsp;
    
    </div>
  

    </header>
    <main>
    
  <section>
  
<p>Here's the problem: There's a BAJILLIION static html pages sitting out on a server, and I need to migrate all that content to a new Database-driven CMS. Additionally, I need to get rid of a lot of non-essential hard-coded presentational markup (like align=&quot;center&quot; or font=&quot;whatever&quot;) and any inline styles that may exist... (you know, because external CSS is the way to go).</p>
<p>I <em>could</em> spend hours and hours just copy-/pasting stuff... but meh. Enter <a href="http://www.crummy.com/software/BeautifulSoup/">BeautifulSoup</a>, <a href="http://www.python.org/doc/2.5.2/lib/module-urllib.html">urllib</a>, and <a href="http://www.python.org/doc/2.5.2/lib/module-sqlite3.html">sqlite</a>... all glued together with <a href="http://python.org">python</a>.</p>
<p>Now, for the most part, the content I want to scrape from these static html pages aIso contains links to the other pages I want to keep. So, here's what we can do, use urlllib to grab the content from the web server, use BeautifulSoup to extract all the values from href attributes in our &quot;a&quot; elements, and keep a list of these (checking to make sure they point to sites we want to keep).</p>
<p>Then, I use BeautifulSoup to parse the page, keeping the bits that I want to keep. Lucky for me, the pages I'm particularly interested in have handy &quot;InstanceBeginEditable&quot; and &quot;InstanceEndEditable&quot; in comments (thanks Dreamweaver), so I just strip out everything before and after that, and parse what's left over. Of course, this sort of thing is going to be different for everybody, but luckily, parsing <em>X</em>HTML isn't that difficulty thanks to <a href="http://www.crummy.com/software/BeautifulSoup/documentation.html">BeautifulSoup's mostly-comprehensive documentation</a>.</p>
<p>So, the part you've been waiting for... Download the Code, try it out, and leave me some feedback!<br />
<a href="http://bradmontgomery.net/files/migrate_web.zip">http://bradmontgomery.net/files/migrate_web.zip</a></p>
<p><a href="http://creativecommons.org/licenses/by/3.0/us/"><img src="http://i.creativecommons.org/l/by/3.0/us/80x15.png" alt="Creative Commons License" /></a><br />
migrate_web.py by <a href="http://bradmontgomery.net/">Brad Montgomery</a> is licensed under a <a href="http://creativecommons.org/licenses/by/3.0/us/">Creative Commons Attribution 3.0 United States License</a>.<br />
Based on a work at <a href="http://bradmontgomery.net/files/migrate_web.py">bradmontgomery.net</a>.<img src="https://blogger.googleusercontent.com/tracker/4123748873183487963-4651340280840269055?l=bradmontgomery.blogspot.com" alt="" /></p>

  </section>

    </main>
    <footer>
      All content copyright &copy; Brad Montgomery.
    </footer>
  </body>
</html>
